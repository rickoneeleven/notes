<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMirror Test</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
        }
        #test-editor {
            width: 800px;
            height: 400px;
            border: 1px solid #3e3e42;
        }
    </style>
</head>
<body>
    <h1>CodeMirror Integration Test</h1>
    <div id="test-editor" class="editor"></div>
    
    <script type="module">
        import EditorManager from '/js/EditorManager.js';
        
        const editorManager = new EditorManager();
        const mountPoint = document.getElementById('test-editor');
        
        editorManager.init(mountPoint, {
            initialContent: 'Welcome to CodeMirror 6!\n\nThis is a test of the line numbering feature.\n\nTry typing some long lines that will wrap to see how the line numbers behave correctly.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.'
        });
        
        editorManager.onContentChange((content) => {
            console.log('Content changed, length:', content.length);
        });
        
        // Test read-only toggle
        window.toggleReadOnly = () => {
            const current = editorManager.view.state.facet(EditorState.readOnly);
            editorManager.setReadOnly(!current);
        };
    </script>
    
    <br><br>
    <button onclick="toggleReadOnly()">Toggle Read-Only</button>
</body>
</html>